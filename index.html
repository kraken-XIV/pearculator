<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pearculator 9001</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      font-size: 12px; /* Reduce text size by 25% */
      margin: 20px;
      background-color: #f4f4f9;
      color: #333;
    }
    h1 {
      text-align: center;
      font-size: 24px; /* Keep the title size */
    }
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
      background: #fff;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
    }
    .box {
      flex: 1;
      min-width: 300px;
      padding: 20px;
      background: #f9f9f9;
      border-radius: 8px;
      box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
    }
    label {
      display: block;
      margin: 10px 0 5px;
      font-weight: bold;
      font-size: 12px; /* Reduced size */
    }
    input {
      width: 33%; /* Reduce input field width */
      padding: 8px; /* Adjust padding for smaller input */
      margin-bottom: 20px;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 12px; /* Reduced size */
    }
    button {
      background: #007bff;
      color: #fff;
      padding: 10px 20px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 12px; /* Reduced size */
      width: 100%;
    }
    button.green {
      background: #28a745;
    }
    button:hover {
      background: #0056b3;
    }
    button.green:hover {
      background: #218838;
    }
    .result {
      margin-top: 20px;
      padding: 10px;
      background: #e8f5e9;
      border: 1px solid #a5d6a7;
      border-radius: 4px;
      max-width: 1200px; /* Restrict width to match the calculator */
      word-wrap: break-word;
    }
    .result strong {
      color: #2e7d32;
    }
  </style>
</head>
<body>
  <h1>Pear Protocol Earnings Calculator</h1>
  <div class="container">
    <!-- Left: Market Parameters -->
    <div class="box">
      <h2>Market Parameters</h2>
      <label for="equityVolume">Equity Daily Trading Volume (USD):</label>
      <input type="number" id="equityVolume" value="500000000000">

      <label for="equityCapture">Market Capture % (Equity):</label>
      <input type="number" id="equityCapture" value="0.001">

      <label for="forexVolume">Forex Daily Trading Volume (USD):</label>
      <input type="number" id="forexVolume" value="7500000000000">

      <label for="forexCapture">Market Capture % (Forex):</label>
      <input type="number" id="forexCapture" value="0.001">

      <label for="commodityVolume">Commodity Daily Trading Volume (USD):</label>
      <input type="number" id="commodityVolume" value="200000000000">

      <label for="commodityCapture">Market Capture % (Commodity):</label>
      <input type="number" id="commodityCapture" value="0.001">

      <label for="cryptoVolume">Crypto Daily Trading Volume (USD):</label>
      <input type="number" id="cryptoVolume" value="100000000000">

      <label for="cryptoCapture">Market Capture % (Crypto):</label>
      <input type="number" id="cryptoCapture" value="0.001">

      <label for="rwaVolume">RWA Daily Trading Volume (USD):</label>
      <input type="number" id="rwaVolume" value="50000000000">

      <label for="rwaCapture">Market Capture % (RWA):</label>
      <input type="number" id="rwaCapture" value="0.001">
    </div>

    <!-- Right: Protocol and Staking Parameters -->
    <div class="box">
      <h2>Protocol and Staking Parameters</h2>
      <label for="tradingFee">Trading Fee (%) (Round-Trip):</label>
      <input type="number" id="tradingFee" value="0.26">

      <label for="rebate">Rebate (%) :</label>
      <input type="number" id="rebate" value="10">

      <label for="stakerShare">Stakers Share (%) :</label>
      <input type="number" id="stakerShare" value="80">

      <label for="ethPrice">ETH Price (USD):</label>
      <input type="number" id="ethPrice" value="3000">

      <label for="pearPrice">PEAR Price (USD):</label>
      <input type="number" id="pearPrice" value="0.50">

      <label for="totalPear">Total PEAR Staked:</label>
      <input type="number" id="totalPear" value="4000000">

      <button onclick="calculate()">Calculate</button>
    </div>
  </div>

  <!-- Personal Earnings Calculator -->
  <div class="container">
    <div class="box">
      <h2>Your Earnings</h2>
      <label for="userPear">Your PEAR Staked:</label>
      <input type="number" id="userPear" value="1000">

      <button class="green" onclick="calculatePersonal()">Calculate Your Earnings</button>
    </div>
  </div>

  <!-- Results Section -->
  <div class="result" id="output">
    <p><strong>Results will appear here after calculation.</strong></p>
  </div>

  <div class="result" id="personalOutput">
    <p><strong>Your earnings will appear here after calculation.</strong></p>
  </div>

  <script>
    let annualEthPerPear = 0; // Global variable to use across both calculators

    function calculate() {
      // Market input values
      const equityVolume = parseFloat(document.getElementById("equityVolume").value);
      const equityCapture = parseFloat(document.getElementById("equityCapture").value) / 100;
      const forexVolume = parseFloat(document.getElementById("forexVolume").value);
      const forexCapture = parseFloat(document.getElementById("forexCapture").value) / 100;
      const commodityVolume = parseFloat(document.getElementById("commodityVolume").value);
      const commodityCapture = parseFloat(document.getElementById("commodityCapture").value) / 100;
      const cryptoVolume = parseFloat(document.getElementById("cryptoVolume").value);
      const cryptoCapture = parseFloat(document.getElementById("cryptoCapture").value) / 100;
      const rwaVolume = parseFloat(document.getElementById("rwaVolume").value);
      const rwaCapture = parseFloat(document.getElementById("rwaCapture").value) / 100;

      // Protocol parameters
      const tradingFee = parseFloat(document.getElementById("tradingFee").value) / 100;
      const rebate = parseFloat(document.getElementById("rebate").value) / 100;
      const stakerShare = parseFloat(document.getElementById("stakerShare").value) / 100;
      const ethPrice = parseFloat(document.getElementById("ethPrice").value);
      const totalPear = parseFloat(document.getElementById("totalPear").value);

      // Captured volumes
      const capturedEquity = equityVolume * equityCapture;
      const capturedForex = forexVolume * forexCapture;
      const capturedCommodity = commodityVolume * commodityCapture;
      const capturedCrypto = cryptoVolume * cryptoCapture;
      const capturedRWA = rwaVolume * rwaCapture;

      const totalCapturedVolume = capturedEquity + capturedForex + capturedCommodity + capturedCrypto + capturedRWA;

      // Fees
      const grossFees = totalCapturedVolume * tradingFee;
      const netFees = grossFees * (1 - rebate);
      const stakerRevenue = netFees * stakerShare;

      // ETH Payouts
      const dailyEthPayout = stakerRevenue / ethPrice;
      const dailyEthPerPear = dailyEthPayout / totalPear;
      annualEthPerPear = dailyEthPerPear * 365; // Store this globally

      // Staking APR (in %)
      const pearPrice = parseFloat(document.getElementById("pearPrice").value);
      const annualStakingRewards = annualEthPerPear * totalPear * ethPrice;
      const apr = (annualStakingRewards / (totalPear * pearPrice)) * 100;

      // Display results
      document.getElementById("output").innerHTML = `
        <p><strong>Total Captured Volume:</strong> $${totalCapturedVolume.toLocaleString()}</p>
        <p><strong>Gross Fees:</strong> $${grossFees.toLocaleString()}</p>
        <p><strong>Net Fees (After Rebate):</strong> $${netFees.toLocaleString()}</p>
        <p><strong>Staker Revenue:</strong> $${stakerRevenue.toLocaleString()}</p>
        <p><strong>Daily ETH Payout:</strong> ${dailyEthPayout.toFixed(4)} ETH</p>
        <p><strong>Daily ETH per PEAR Staked:</strong> ${dailyEthPerPear.toFixed(8)} ETH</p>
        <p><strong>Annual ETH per PEAR Staked:</strong> ${annualEthPerPear.toFixed(8)} ETH</p>
        <p><strong>Staking APR:</strong> ${apr.toFixed(2)}%</p>
      `;
    }

    function calculatePersonal() {
      const userPear = parseFloat(document.getElementById("userPear").value);

      if (annualEthPerPear === 0) {
        document.getElementById("personalOutput").innerHTML = `
          <p><strong>Please calculate the overall protocol earnings first by clicking the main "Calculate" button above.</strong></p>
        `;
        return;
      }

      // Calculate user's annual earnings
      const userAnnualEth = annualEthPerPear * userPear;

      document.getElementById("personalOutput").innerHTML = `
        <p><strong>Your Annual ETH Earnings:</strong> ${userAnnualEth.toFixed(4)} ETH</p>
        <p><strong>Your Annual USD Earnings (at current ETH price):</strong> $${(userAnnualEth * parseFloat(document.getElementById("ethPrice").value)).toFixed(2)}</p>
      `;
    }
  </script>
</body>
</html>